{"version":3,"sources":["webpack:///./src/views/BooksList.vue","webpack:///./src/components/Book.vue","webpack:///./src/components/Book.vue?43e5","webpack:///./src/views/BooksList.vue?b5cf","webpack:///./src/components/Book.vue?f7a9","webpack:///./node_modules/core-js/modules/es.array.join.js","webpack:///./src/views/BooksList.vue?8a12"],"names":["class","value","disabled","selected","label","ref","sorted","saveSortState","allGenres","item","key","id","type","clearSortState","filter","saveFilterState","totalAuthors","author","totalTitles","title","clearFilterState","getSortedBooks","book","filteredAuthors","length","openPage","genres","join","delBook","props","methods","this","$router","push","name","params","deleteBook","render","__scopeId","data","components","Book","query","$route","console","log","sort","setBookFilter","setBookSort","computed","Array","from","Set","getAllBooks","map","b","arr","slice","concat","mounted","FormSelect","init","$refs","watch","newValue","$","IndexedObject","toIndexedObject","arrayMethodIsStrict","nativeJoin","ES3_STRINGS","Object","STRICT_METHOD","target","proto","forced","separator","call","undefined"],"mappings":"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","file":"js/chunk-5d8a04ea.857c6ed0.js","sourcesContent":["<template>\n<div class=\"row\">\n  <h3>Список книг</h3>\n  <p class=\"flow-text row s6 subtitle\">Здесь представлен список книг в вашей библиотеке.\n    Вы можете их отсортировать и отфильтровать по желанию</p>\n  <div class=\"input-field col s6\">\n    <select ref=\"sort\" v-model=\"sorted\" @change=\"saveSortState(sorted)\">\n      <option value=\"\" disabled selected>Выберите опцию</option>\n      <option value=\"author\">По автору</option>\n      <option value=\"title\">По названию</option>\n      <optgroup label=\"По жанру\">\n        <option v-for=\"item of allGenres\" v-bind:key=\"item.id\" :value=\"item\"> {{ item }}\n        </option>\n      </optgroup>\n    </select>\n    <label>Сортировать список</label>\n    <button type=\"button\" class=\"btn\" @click=\"clearSortState\">Сбросить</button>\n  </div>\n  <div class=\"input-field col s6\">\n    <select ref='filter' v-model=\"filter\" @change=\"saveFilterState(filter)\">\n      <option value=\"\" disabled selected>Выберите опцию</option>\n      <optgroup label=\"По Автору\">\n        <option v-for=\"author of totalAuthors\" v-bind:key=\"author.id\" :value=\"author\"> {{ author }}\n        </option>\n      </optgroup>\n      <optgroup label=\"По Названию\">\n        <option v-for=\"title of totalTitles\" v-bind:key=\"title.id\" :value=\"title\"> {{ title }}\n        </option>\n      </optgroup>\n      <optgroup label=\"По жанру\">\n        <option v-for=\"item of allGenres\" v-bind:key=\"item.id\" :value=\"item\"> {{ item }}\n        </option>\n      </optgroup>\n    </select>\n    <label>Фильтровать список</label>\n    <button type=\"button\" class=\"btn\" @click=\"clearFilterState\">Сбросить фильтр</button>\n  </div>\n\n  <table class=\"highlight col s12 responsive-table section\">\n    <thead>\n      <tr>\n          <th>Автор</th>\n          <th>Заголовок</th>\n          <th>Жанр</th>\n          <th>Удалить</th>\n      </tr>\n    </thead>\n    <tbody>\n      <Book v-bind:book=\"book\" v-for=\"book of getSortedBooks\" v-bind:key=\"book.id\"/>\n    </tbody>\n    <p class=\"left-align flow-text\">\n      Всего авторов: {{ filteredAuthors }}, произведений: {{ getSortedBooks.length}}\n    </p>\n  </table>\n</div>\n</template>\n\n<script>\nimport M from 'materialize-css';\nimport { mapGetters, mapActions } from 'vuex';\nimport Book from '../components/Book.vue';\n\nexport default {\n  data() {\n    return {\n      sorted: null,\n      filter: null,\n    };\n  },\n  components: {\n    Book,\n  },\n  methods: {\n    ...mapActions(['setBookFilter', 'setBookSort']),\n    saveFilterState(value) {\n      this.$router.push({ name: 'booksList', query: { ...this.$route.query, filter: value } });\n      console.log(`onChange ${value}`);\n    },\n    saveSortState(value) {\n      this.$router.push({ name: 'booksList', query: { ...this.$route.query, sort: value } });\n      console.log(`onChange ${value}`);\n    },\n    clearFilterState() {\n      this.saveFilterState(null);\n      this.filter = null;\n      this.setBookFilter(this.filter);\n    },\n    clearSortState() {\n      this.saveSortState(null);\n      this.sorted = null;\n      this.setBookSort(this.sorted);\n    },\n  },\n  computed: {\n    ...mapGetters(['getAllBooks', 'getSortedBooks']),\n    totalAuthors() {\n      return Array.from(new Set(this.getAllBooks.map((b) => b.author)));\n    },\n    totalTitles() {\n      return this.getAllBooks.map((b) => b.title);\n    },\n    allGenres() {\n      const arr = this.getAllBooks.slice(0).map((b) => Array.from(b.genres));\n      return Array.from(new Set([].concat(...arr)));\n    },\n    filteredAuthors() {\n      return Array.from(new Set(this.getSortedBooks.map((b) => b.author))).length;\n    },\n  },\n  mounted() {\n    M.FormSelect.init(this.$refs.sort, {\n    });\n    M.FormSelect.init(this.$refs.filter, {\n    });\n    if (this.$route.query.filter) {\n      this.filter = this.$route.query.filter;\n    }\n    if (this.$route.query.sort) {\n      this.sorted = this.$route.query.sort;\n    }\n  },\n  watch: {\n    filter: function checkFilter(newValue) {\n      this.setBookFilter(newValue);\n    },\n    sorted: function checkSorted(newValue) {\n      this.setBookSort(newValue);\n    },\n  },\n};\n</script>\n\n<style scoped>\n  h3 {\n    text-align: center;\n    margin: 0 0 30px 0;\n  }\n  button {\n    margin-top: 15px;\n  }\n  .subtitle {\n    max-width: 60%;\n  }\n</style>\n","<template>\n    <tr>\n      <td @click.self=\"openPage\" class=\"hoverable\">{{ book.author }}</td>\n      <td>{{ book.title }}</td>\n      <td>{{ book.genres.join(', ') }}</td>\n      <td><button @click.self=\"delBook\"\n            type='button' class=\"waves-effect waves-light btn-small\">&times;</button></td>\n    </tr>\n</template>\n\n<script>\nimport { mapActions } from 'vuex';\n\nexport default {\n  props: ['book', 'filteredBooks'],\n  methods: {\n    ...mapActions(['deleteBook']),\n    openPage() {\n      this.$router.push({ name: 'editBook', params: { id: this.book.id } });\n    },\n    delBook() {\n      this.deleteBook(this.book.id);\n    },\n  },\n};\n</script>\n\n<style scoped>\n  .hoverable {\n    cursor: pointer;\n  }\n</style>\n","import { render } from \"./Book.vue?vue&type=template&id=2da380d7&scoped=true\"\nimport script from \"./Book.vue?vue&type=script&lang=js\"\nexport * from \"./Book.vue?vue&type=script&lang=js\"\n\nimport \"./Book.vue?vue&type=style&index=0&id=2da380d7&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-2da380d7\"\n\nexport default script","import { render } from \"./BooksList.vue?vue&type=template&id=76a70c6f&scoped=true\"\nimport script from \"./BooksList.vue?vue&type=script&lang=js\"\nexport * from \"./BooksList.vue?vue&type=script&lang=js\"\n\nimport \"./BooksList.vue?vue&type=style&index=0&id=76a70c6f&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-76a70c6f\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Book.vue?vue&type=style&index=0&id=2da380d7&scoped=true&lang=css\"","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./BooksList.vue?vue&type=style&index=0&id=76a70c6f&scoped=true&lang=css\""],"sourceRoot":""}